#!/usr/bin/env bash

FOLDER=~/Pictures/Wallpapers # wallpaper folder
bgtype=fill # default bg type

menu () {
	CHOICE=$(ls $FOLDER/*.jpg ls $FOLDER/*.jpeg ls $FOLDER/*.png | nsxiv -tio)
	echo "CHOICE: $CHOICE"
	scripts $CHOICE
}

# other wal scripts HERE
scripts () {
	image=$1

	./.local/bin/wal -i "$image" -n
	
	feh "--bg-$bgtype" "$image"

	i3 restart

	flatpak run com.github.themix_project.Oomox
	#gsettings set org.gnome.desktop.interface gtk-theme oomox-colors-oomox
	#printf "[Settings]\ngtk-theme-name = oomox-colors-oomox\ngtk-icon-theme-name = oomox-colors-oomox" > ~/.config/gtk-3.0/dunstrc
}

main () {
	if [[ -v IMGCLI ]]
	then
		scripts $IMGCLI	
	else
		menu
	fi
}

case "$#" in
	0) menu ;;
	*) 
		while getopts "i:b:m" opt; do
			case "$opt" in
				i) IMGCLI=$OPTARG; main ;;
				b)
					case "$OPTARG" in
						"center"|"fill"|"max"|"scale"|"tile") bgtype=$OPTARG; main ;;
						*) printf "ERROR: incorrect background type.\ntry: center, fill, max, scale, or tile.\n" ;;
					esac ;;
				m) menu ;;
			esac
		done ;;
esac
